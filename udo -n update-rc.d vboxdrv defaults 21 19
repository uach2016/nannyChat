UPDATE-RC.D(8)                      sysv-rc                     UPDATE-RC.D(8)

NNAAMMEE
       update-rc.d - install and remove System-V style init script links

SSYYNNOOPPSSIISS
       uuppddaattee--rrcc..dd [_-_n] [_-_f] _n_a_m_e rreemmoovvee

       uuppddaattee--rrcc..dd [_-_n] _n_a_m_e ddeeffaauullttss

       uuppddaattee--rrcc..dd [_-_n] _n_a_m_e ddiissaabbllee||eennaabbllee [ _S_|_2_|_3_|_4_|_5 ]

DDEESSCCRRIIPPTTIIOONN
       uuppddaattee--rrcc..dd  updates  the  System V style init script links //eettcc//rrcc_r_u_n_‐
       _l_e_v_e_l..dd//_N_N_n_a_m_e whose target  is  the  script  //eettcc//iinniitt..dd//_n_a_m_e.   These
       links  are  run  by  iinniitt when it changes runlevels; they are generally
       used to start and stop system services such as  daemons.   _r_u_n_l_e_v_e_l  is
       one  of the runlevels supported by iinniitt, namely, 00112233445566778899SS, and _N_N is
       the two-digit sequence number that determines  where  in  the  sequence
       iinniitt will run the scripts.

       This  manpage  documents  only  the usage and behaviour of uuppddaattee--rrcc..dd.
       For a discussion of the System V style init script arrangements  please
       see iinniitt(8) and the _D_e_b_i_a_n _P_o_l_i_c_y _M_a_n_u_a_l.

IINNSSTTAALLLLIINNGG IINNIITT SSCCRRIIPPTT LLIINNKKSS
       update-rc.d requires dependency and runlevel information to be provided
       in the init.d script LSB comment header of all init.d scripts.  See the
       insserv(8) manual page for details about the LSB header format.

       When  run  with  the  ddeeffaauullttss  option,  uuppddaattee--rrcc..dd  makes links named
       //eettcc//rrcc_r_u_n_l_e_v_e_l..dd//[[SSKK]]_N_N_n_a_m_e that point to the script //eettcc//iinniitt..dd//_n_a_m_e,
       using  runlevel  and  dependency information from the init.d script LSB
       comment header.

       If any files  named  //eettcc//rrcc_r_u_n_l_e_v_e_l..dd//[[SSKK]]????_n_a_m_e  already  exist  then
       uuppddaattee--rrcc..dd  does nothing.  The program was written this way so that it
       will never change an existing configuration, which may have  been  cus‐
       tomized  by  the  system  administrator.  The program will only install
       links if none are present, i.e., if it appears  that  the  service  has
       never been installed before.

       Older  versions  of  uuppddaattee--rrcc..dd also supported ssttaarrtt and ssttoopp options.
       These options are no longer supported, and are now  equivalent  to  the
       ddeeffaauullttss option.

       A  common  system  administration error is to delete the links with the
       thought that this will "disable" the service, i.e., that this will pre‐
       vent  the  service from being started.  However, if all links have been
       deleted then the next time  the  package  is  upgraded,  the  package's
       _p_o_s_t_i_n_s_t  script  will  run  uuppddaattee--rrcc..dd  again and this will reinstall
       links at their factory default locations.  The correct way  to  disable
       services  is  to  configure  the service as stopped in all runlevels in
       which it is started by default.  In the System V init system this means
       renaming the service's symbolic links from SS to KK.

       The  script  //eettcc//iinniitt..dd//_n_a_m_e  must  exist before uuppddaattee--rrcc..dd is run to
       create the links.

RREEMMOOVVIINNGG SSCCRRIIPPTTSS
       When invoked with the _r_e_m_o_v_e option, update-rc.d removes any  links  in
       the  //eettcc//rrcc_r_u_n_l_e_v_e_l..dd directories to the script //eettcc//iinniitt..dd//_n_a_m_e.  The
       script must have been deleted already.  If the script is still  present
       then uuppddaattee--rrcc..dd aborts with an error message.

       uuppddaattee--rrcc..dd is usually called from a package's post-removal script when
       that script is given the ppuurrggee argument.  Any files in the  //eettcc//rrcc_r_u_n_‐
       _l_e_v_e_l..dd   directories  that  are  not  symbolic  links  to  the  script
       //eettcc//iinniitt..dd//_n_a_m_e will be left untouched.

DDIISSAABBLLIINNGG IINNIITT SSCCRRIIPPTT SSTTAARRTT LLIINNKKSS
       When run with the ddiissaabbllee [ SS||22||33||44||55 ] options,  uuppddaattee--rrcc..dd  modifies
       existing  runlevel  links  for  the script //eettcc//iinniitt..dd//_n_a_m_e by renaming
       start links to stop links with a sequence number equal to  the  differ‐
       ence of 100 minus the original sequence number.

       When  run  with  the eennaabbllee [ SS||22||33||44||55 ] options, uuppddaattee--rrcc..dd modifies
       existing runlevel links for the  script  //eettcc//iinniitt..dd//_n_a_m_e  by  renaming
       stop  links to start links with a sequence number equal to the positive
       difference of current sequence number minus 100, thus returning to  the
       original sequence number that the script had been installed with before
       disabling it.

       Both of these options only operate on start runlevel links of S, 2,  3,
       4  or  5. If no start runlevel is specified after the disable or enable
       keywords, the script will attempt to modify links  in  all  start  run‐
       levels.

OOPPTTIIOONNSS
       _-_n     Don't do anything, just show what we would do.

       _-_f     Force removal of symlinks even if //eettcc//iinniitt..dd//_n_a_m_e still exists.

EEXXAAMMPPLLEESS
       Insert links using the defaults:
          uuppddaattee--rrcc..dd ffoooobbaarr ddeeffaauullttss
       The equivalent dependency header would have start and stop
       dependencies on $remote_fs and $syslog, and start in
       runlevels 2-5 and stop in runlevels 0, 1 and 6.
       Remove  all  links  for  a  script  (assuming  foobar  has been deleted
       already):
          uuppddaattee--rrcc..dd ffoooobbaarr rreemmoovvee
       Example of disabling a service:
          uuppddaattee--rrcc..dd ffoooobbaarr ddiissaabbllee
       Example of a command for installing a  system  initialization-and-shut‐
       down script:
          uuppddaattee--rrcc..dd ffoooobbaarr ddeeffaauullttss
       Example of a command for disabling a system initialization-and-shutdown
       script:
          uuppddaattee--rrcc..dd ffoooobbaarr ddiissaabbllee

BBUUGGSS
       See http://bugs.debian.org/sysv-rc.

FFIILLEESS
       //eettcc//iinniitt..dd//
              The directory containing the actual init scripts.

       //eettcc//rrcc??..dd//
              The directories containing the links used by iinniitt and managed by
              uuppddaattee--rrcc..dd.

       //eettcc//iinniitt..dd//sskkeelleettoonn
              Model for use by writers of iinniitt..dd scripts.

SSEEEE AALLSSOO
       _D_e_b_i_a_n _P_o_l_i_c_y _M_a_n_u_a_l,
       //eettcc//iinniitt..dd//sskkeelleettoonn,
       iinnsssseerrvv(8), ssyyssvv--rrcc--ccoonnff(8), bbuumm(8), iinniitt(8).

Debian Project                 14 November 2005                 UPDATE-RC.D(8)
